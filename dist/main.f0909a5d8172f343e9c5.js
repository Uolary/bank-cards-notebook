(()=>{"use strict";var e,t={9590:(e,t,r)=>{var n=function(e,t){return(t||document).querySelector(e)},c=function(e,t,r,n){e.addEventListener(t,r,!!n)},a=function(e,t,r,n){e.removeEventListener(t,r,!!n)};function o(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var d=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.key=t}var t,r,n;return t=e,(r=[{key:"saveData",value:function(e,t){localStorage.setItem(this.key,JSON.stringify(e)),t&&t()}},{key:"loadData",value:function(){var e=JSON.parse(localStorage.getItem(this.key));if(e)return e.reduce((function(e,t){return[].concat(o(e),[{cardNumber:t.cardNumber,description:t.description,cardName:t.cardName}])}),[])}}])&&l(t.prototype,r),n&&l(t,n),e}(),s=Object.freeze({alreadyCard:"alreadyCard",invalidCard:"invalidCard",incompleteCard:"incompleteCard",emptyDescription:"emptyDescription"}),u=Object.freeze({visa:"Visa",masterCard:"Mastercard"}),f=Object.freeze({overflowHidden:"overflow-hidden",app:"app",cardList:{card__list:"card__list"},card:{card__item:"card__item",card__header:"card__header",card__number:"card__number",card__removeBtn:"card__remove-btn",card__removeSvg:"card__remove-svg",card__description:"card__description",card__descriptionLess:"card__description--less",card__lessShowDescription:"card__less-show-description",card__lessShowDescriptionAbsolute:"card__less-show-description--absolute",card__ellipsis:"card__ellipsis",card__numberPart:"card__number-part",card__typeSvg:"card__type-svg",card__empty:"card__empty"},modal:{modal:"modal",modalShowModalBtn:"modal__show-btn",modal__addCard:"modal__add-card",modal__bg:"modal__bg",modal__bgHigh:"modal__bg--high",modal__bgLow:"modal__bg--low",modal__inner:"modal__inner",modal__closeBtn:"modal__close-btn",modal__title:"modal__title",modal__form:"modal__form",modal__row:"modal__row",modal__input:"modal__input",modal__label:"modal__label",modal__error:"modal__error",modal__removeCardBtn:"modal__remove-card-btn",modal__cancelBtn:"modal__cancel-btn"}}),p=Object.freeze({cardNumber:"card-number",cardDescription:"card-description"});function m(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var h=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.card=t}var t,r,c;return t=e,r=[{key:"renderCardList",value:function(e){var t=this;n(".".concat(f.cardList.card__list)).innerHTML="",e.reverse().forEach((function(e){n(".".concat(f.cardList.card__list)).innerHTML+=t.card.cardHtml(e),t.card.checkDescriptionLength(e.cardNumber)}))}},{key:"renderEmptyList",value:function(){n(".".concat(f.cardList.card__list)).innerHTML='\n      <li class="'.concat(f.card.card__item,'">\n        <p class="').concat(f.card.card__empty,'">Your card list is empty.</p>\n      </li>\n    ')}}],r&&m(t.prototype,r),c&&m(t,c),e}();function _(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var v=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._eventLessShowDescription()}var t,r,a;return t=e,r=[{key:"cardHtml",value:function(e){return'\n      <li class="'.concat(f.card.card__item,'" data-card-id="').concat(e.cardNumber,'">\n        <header class="').concat(f.card.card__header,'">\n          ').concat(this._getCardIcon(e.cardName),'\n          <h2 class="').concat(f.card.card__number,'">\n            ').concat(this._getSpacedCardNumber(e.cardNumber),'\n          </h2>\n          <button class="').concat(f.card.card__removeBtn,'" aria-label="Remove a credit card">\n            <svg class="').concat(f.card.card__removeSvg,'" width="512px" height="512px" viewBox="0 0 512 512">\n              <g>\n                <path d="M413.7,133.4c-2.4-9-4-14-4-14c-2.6-9.3-9.2-9.3-19-10.9l-53.1-6.7c-6.6-1.1-6.6-1.1-9.2-6.8c-8.7-19.6-11.4-31-20.9-31   h-103c-9.5,0-12.1,11.4-20.8,31.1c-2.6,5.6-2.6,5.6-9.2,6.8l-53.2,6.7c-9.7,1.6-16.7,2.5-19.3,11.8c0,0-1.2,4.1-3.7,13   c-3.2,11.9-4.5,10.6,6.5,10.6h302.4C418.2,144.1,417,145.3,413.7,133.4z"/><path d="M379.4,176H132.6c-16.6,0-17.4,2.2-16.4,14.7l18.7,242.6c1.6,12.3,2.8,14.8,17.5,14.8h207.2c14.7,0,15.9-2.5,17.5-14.8   l18.7-242.6C396.8,178.1,396,176,379.4,176z"/>\n              </g>\n            </svg>\n          </button>\n        </header>\n        <p class="').concat(f.card.card__description,'">\n          ').concat(e.description,"\n        </p>\n      </li>\n    ")}},{key:"bindRemoveCard",value:function(e){c(n(".".concat(f.cardList.card__list)),"click",(function(t){t.target.closest(".".concat(f.card.card__removeBtn))&&e(t.target.closest(".".concat(f.card.card__item)).dataset.cardId)}))}},{key:"checkDescriptionLength",value:function(e){var t=n('[data-card-id="'.concat(e,'"]')).clientWidth-60,r=n('[data-card-id="'.concat(e,'"] .').concat(f.card.card__description));r.offsetWidth>=t-20&&(r.insertAdjacentHTML("beforeend",this._lessShowDescriptionBtn(e)),r.classList.add(f.card.card__descriptionLess))}},{key:"_getCardIcon",value:function(e){return e===u.visa?'\n        <svg class="'.concat(f.card.card__typeSvg,'" height="512px" width="512px" viewBox="0 0 512 512" xml:space="preserve" xmlns="http://www.w3.org/2000/svg"><g><g><g><path d="M211.328,184.445l-23.465,144.208h37.542l23.468-144.208     H211.328z M156.276,184.445l-35.794,99.185l-4.234-21.358l0.003,0.007l-0.933-4.787c-4.332-9.336-14.365-27.08-33.31-42.223     c-5.601-4.476-11.247-8.296-16.705-11.559l32.531,124.943h39.116l59.733-144.208H156.276z M302.797,224.48     c0-16.304,36.563-14.209,52.629-5.356l5.357-30.972c0,0-16.534-6.288-33.768-6.288c-18.632,0-62.875,8.148-62.875,47.739     c0,37.26,51.928,37.723,51.928,57.285c0,19.562-46.574,16.066-61.944,3.726l-5.586,32.373c0,0,16.763,8.148,42.382,8.148     c25.616,0,64.272-13.271,64.272-49.37C355.192,244.272,302.797,240.78,302.797,224.48z M455.997,184.445h-30.185     c-13.938,0-17.332,10.747-17.332,10.747l-55.988,133.461h39.131l7.828-21.419h47.728l4.403,21.419h34.472L455.997,184.445z      M410.27,277.641l19.728-53.966l11.098,53.966H410.27z" style="fill-rule:evenodd;clip-rule:evenodd;fill:#005BAC;"/></g></g></g><g><g><g><path d="M104.132,198.022c0,0-1.554-13.015-18.144-13.015H25.715     l-0.706,2.446c0,0,28.972,5.906,56.767,28.033c26.562,21.148,35.227,47.51,35.227,47.51L104.132,198.022z" style="fill-rule:evenodd;clip-rule:evenodd;fill:#F6AC1D;"/></g></g></g></svg>\n      '):e===u.masterCard?'\n        <svg class="'.concat(f.card.card__typeSvg,'" height="64px" width="64px" viewBox="0 0 64 64" xml:space="preserve" xmlns="http://www.w3.org/2000/svg"><g><g><g><path d="M63.5,32c0,10.4-8.4,18.9-18.9,18.9c-10.4,0-18.9-8.5-18.9-18.9v0c0-10.4,8.4-18.9,18.8-18.9     C55.1,13.1,63.5,21.6,63.5,32C63.5,32,63.5,32,63.5,32z" fill="#FFB600"/></g></g><g><g><path d="M44.6,13.1c10.4,0,18.9,8.5,18.9,18.9c0,0,0,0,0,0c0,10.4-8.4,18.9-18.9,18.9c-10.4,0-18.9-8.5-18.9-18.9     " fill="#F7981D"/></g></g><g><g><path d="M44.6,13.1c10.4,0,18.9,8.5,18.9,18.9c0,0,0,0,0,0c0,10.4-8.4,18.9-18.9,18.9" fill="#FF8500"/></g></g><g><g><path d="M19.2,13.1C8.9,13.2,0.5,21.6,0.5,32c0,10.4,8.4,18.9,18.9,18.9c4.9,0,9.3-1.9,12.7-4.9l0,0h0     c0.7-0.6,1.3-1.3,1.9-2h-3.9c-0.5-0.6-1-1.3-1.4-1.9h6.7c0.4-0.6,0.8-1.3,1.1-2h-8.9c-0.3-0.6-0.6-1.3-0.8-2h10.4     c0.6-1.9,1-3.9,1-6c0-1.4-0.2-2.7-0.4-4H26.2c0.1-0.7,0.3-1.3,0.5-2h10.4c-0.2-0.7-0.5-1.4-0.8-2h-8.8c0.3-0.7,0.7-1.3,1.1-2h6.7     c-0.4-0.7-0.9-1.4-1.5-2h-3.7c0.6-0.7,1.2-1.3,1.9-1.9c-3.3-3.1-7.8-4.9-12.7-4.9C19.3,13.1,19.3,13.1,19.2,13.1z" fill="#FF5050"/></g></g><g><g><path d="M0.5,32c0,10.4,8.4,18.9,18.9,18.9c4.9,0,9.3-1.9,12.7-4.9l0,0h0c0.7-0.6,1.3-1.3,1.9-2h-3.9     c-0.5-0.6-1-1.3-1.4-1.9h6.7c0.4-0.6,0.8-1.3,1.1-2h-8.9c-0.3-0.6-0.6-1.3-0.8-2h10.4c0.6-1.9,1-3.9,1-6c0-1.4-0.2-2.7-0.4-4     H26.2c0.1-0.7,0.3-1.3,0.5-2h10.4c-0.2-0.7-0.5-1.4-0.8-2h-8.8c0.3-0.7,0.7-1.3,1.1-2h6.7c-0.4-0.7-0.9-1.4-1.5-2h-3.7     c0.6-0.7,1.2-1.3,1.9-1.9c-3.3-3.1-7.8-4.9-12.7-4.9c0,0-0.1,0-0.1,0" fill="#E52836"/></g></g><g><g><path d="M19.4,50.9c4.9,0,9.3-1.9,12.7-4.9l0,0h0c0.7-0.6,1.3-1.3,1.9-2h-3.9c-0.5-0.6-1-1.3-1.4-1.9h6.7     c0.4-0.6,0.8-1.3,1.1-2h-8.9c-0.3-0.6-0.6-1.3-0.8-2h10.4c0.6-1.9,1-3.9,1-6c0-1.4-0.2-2.7-0.4-4H26.2c0.1-0.7,0.3-1.3,0.5-2     h10.4c-0.2-0.7-0.5-1.4-0.8-2h-8.8c0.3-0.7,0.7-1.3,1.1-2h6.7c-0.4-0.7-0.9-1.4-1.5-2h-3.7c0.6-0.7,1.2-1.3,1.9-1.9     c-3.3-3.1-7.8-4.9-12.7-4.9c0,0-0.1,0-0.1,0" fill="#CB2026"/></g></g><g><g><g><path d="M26.1,36.8l0.3-1.7c-0.1,0-0.3,0.1-0.5,0.1c-0.7,0-0.8-0.4-0.7-0.6l0.6-3.5h1.1l0.3-1.9h-1l0.2-1.2h-2      c0,0-1.2,6.6-1.2,7.4c0,1.2,0.7,1.7,1.6,1.7C25.4,37.1,25.9,36.9,26.1,36.8z" fill="#FFFFFF"/></g></g><g><g><path d="M26.8,33.6c0,2.8,1.9,3.5,3.5,3.5c1.5,0,2.1-0.3,2.1-0.3l0.4-1.9c0,0-1.1,0.5-2.1,0.5      c-2.2,0-1.8-1.6-1.8-1.6h4.1c0,0,0.3-1.3,0.3-1.8c0-1.3-0.7-2.9-2.9-2.9C28.3,28.9,26.8,31.1,26.8,33.6z M30.3,30.7      c1.1,0,0.9,1.3,0.9,1.4H29C29,32,29.2,30.7,30.3,30.7z" fill="#FFFFFF"/></g></g><g><g><path d="M43,36.8l0.4-2.2c0,0-1,0.5-1.7,0.5c-1.4,0-2-1.1-2-2.3c0-2.4,1.2-3.7,2.6-3.7c1,0,1.8,0.6,1.8,0.6      l0.3-2.1c0,0-1.2-0.5-2.3-0.5c-2.3,0-4.6,2-4.6,5.8c0,2.5,1.2,4.2,3.6,4.2C41.9,37.1,43,36.8,43,36.8z" fill="#FFFFFF"/></g></g><g><g><path d="M15.1,28.9c-1.4,0-2.4,0.4-2.4,0.4l-0.3,1.7c0,0,0.9-0.4,2.2-0.4c0.7,0,1.3,0.1,1.3,0.7      c0,0.4-0.1,0.5-0.1,0.5s-0.6,0-0.9,0c-1.7,0-3.6,0.7-3.6,3c0,1.8,1.2,2.2,1.9,2.2c1.4,0,2-0.9,2.1-0.9l-0.1,0.8h1.8l0.8-5.5      C17.8,29,15.8,28.9,15.1,28.9z M15.5,33.4c0,0.3-0.2,1.9-1.4,1.9c-0.6,0-0.8-0.5-0.8-0.8c0-0.5,0.3-1.2,1.8-1.2      C15.4,33.4,15.5,33.4,15.5,33.4z" fill="#FFFFFF"/></g></g><g><g><path d="M19.7,37c0.5,0,3,0.1,3-2.6c0-2.5-2.4-2-2.4-3c0-0.5,0.4-0.7,1.1-0.7c0.3,0,1.4,0.1,1.4,0.1l0.3-1.8      c0,0-0.7-0.2-1.9-0.2c-1.5,0-3,0.6-3,2.6c0,2.3,2.5,2.1,2.5,3c0,0.6-0.7,0.7-1.2,0.7c-0.9,0-1.8-0.3-1.8-0.3l-0.3,1.8      C17.5,36.8,18,37,19.7,37z" fill="#FFFFFF"/></g></g><g><g><path d="M59.6,27.3L59.2,30c0,0-0.8-1-1.9-1c-1.8,0-3.4,2.2-3.4,4.8c0,1.6,0.8,3.3,2.5,3.3      c1.2,0,1.9-0.8,1.9-0.8l-0.1,0.7h2l1.5-9.6L59.6,27.3z M58.7,32.6c0,1.1-0.5,2.5-1.6,2.5c-0.7,0-1.1-0.6-1.1-1.6      c0-1.6,0.7-2.6,1.6-2.6C58.3,30.9,58.7,31.4,58.7,32.6z" fill="#FFFFFF"/></g></g><g><g><path d="M4.2,36.9l1.2-7.2l0.2,7.2H7l2.6-7.2l-1.1,7.2h2.1l1.6-9.6H8.9l-2,5.9l-0.1-5.9H3.9l-1.6,9.6H4.2z" fill="#FFFFFF"/></g></g><g><g><path d="M35.2,36.9c0.6-3.3,0.7-6,2.1-5.5c0.2-1.3,0.5-1.8,0.7-2.3c0,0-0.1,0-0.4,0c-0.9,0-1.6,1.2-1.6,1.2      l0.2-1.1h-1.9l-1.3,7.8H35.2z" fill="#FFFFFF"/></g></g><g><g><path d="M47.6,28.9c-1.4,0-2.4,0.4-2.4,0.4l-0.3,1.7c0,0,0.9-0.4,2.2-0.4c0.7,0,1.3,0.1,1.3,0.7      c0,0.4-0.1,0.5-0.1,0.5s-0.6,0-0.9,0c-1.7,0-3.6,0.7-3.6,3c0,1.8,1.2,2.2,1.9,2.2c1.4,0,2-0.9,2.1-0.9l-0.1,0.8h1.8l0.8-5.5      C50.4,29,48.3,28.9,47.6,28.9z M48.1,33.4c0,0.3-0.2,1.9-1.4,1.9c-0.6,0-0.8-0.5-0.8-0.8c0-0.5,0.3-1.2,1.8-1.2      C48,33.4,48,33.4,48.1,33.4z" fill="#FFFFFF"/></g></g><g><g><path d="M52,36.9c0.6-3.3,0.7-6,2.1-5.5c0.2-1.3,0.5-1.8,0.7-2.3c0,0-0.1,0-0.4,0c-0.9,0-1.6,1.2-1.6,1.2      l0.2-1.1h-1.9l-1.3,7.8H52z" fill="#FFFFFF"/></g></g></g><g><g><g><path d="M23,35.4c0,1.2,0.7,1.7,1.6,1.7c0.7,0,1.3-0.2,1.5-0.3l0.3-1.7c-0.1,0-0.3,0.1-0.5,0.1      c-0.7,0-0.8-0.4-0.7-0.6l0.6-3.5h1.1l0.3-1.9h-1l0.2-1.2" fill="#DCE5E5"/></g></g><g><g><path d="M27.8,33.6c0,2.8,0.9,3.5,2.5,3.5c1.5,0,2.1-0.3,2.1-0.3l0.4-1.9c0,0-1.1,0.5-2.1,0.5      c-2.2,0-1.8-1.6-1.8-1.6h4.1c0,0,0.3-1.3,0.3-1.8c0-1.3-0.7-2.9-2.9-2.9C28.3,28.9,27.8,31.1,27.8,33.6z M30.3,30.7      c1.1,0,1.3,1.3,1.3,1.4H29C29,32,29.2,30.7,30.3,30.7z" fill="#DCE5E5"/></g></g><g><g><path d="M43,36.8l0.4-2.2c0,0-1,0.5-1.7,0.5c-1.4,0-2-1.1-2-2.3c0-2.4,1.2-3.7,2.6-3.7c1,0,1.8,0.6,1.8,0.6      l0.3-2.1c0,0-1.2-0.5-2.3-0.5c-2.3,0-3.6,2-3.6,5.8c0,2.5,0.2,4.2,2.6,4.2C41.9,37.1,43,36.8,43,36.8z" fill="#DCE5E5"/></g></g><g><g><path d="M12.4,31.1c0,0,0.9-0.4,2.2-0.4c0.7,0,1.3,0.1,1.3,0.7c0,0.4-0.1,0.5-0.1,0.5s-0.6,0-0.9,0      c-1.7,0-3.6,0.7-3.6,3c0,1.8,1.2,2.2,1.9,2.2c1.4,0,2-0.9,2.1-0.9l-0.1,0.8h1.8l0.8-5.5c0-2.3-2-2.4-2.8-2.4 M16.5,33.4      c0,0.3-1.2,1.9-2.4,1.9c-0.6,0-0.8-0.5-0.8-0.8c0-0.5,0.3-1.2,1.8-1.2C15.4,33.4,16.5,33.4,16.5,33.4z" fill="#DCE5E5"/></g></g><g><g><path d="M17.5,36.8c0,0,0.6,0.2,2.3,0.2c0.5,0,3,0.1,3-2.6c0-2.5-2.4-2-2.4-3c0-0.5,0.4-0.7,1.1-0.7      c0.3,0,1.4,0.1,1.4,0.1l0.3-1.8c0,0-0.7-0.2-1.9-0.2c-1.5,0-2,0.6-2,2.6c0,2.3,1.5,2.1,1.5,3c0,0.6-0.7,0.7-1.2,0.7" fill="#DCE5E5"/></g></g><g><g><path d="M59.2,30c0,0-0.8-1-1.9-1c-1.8,0-2.4,2.2-2.4,4.8c0,1.6-0.2,3.3,1.5,3.3c1.2,0,1.9-0.8,1.9-0.8l-0.1,0.7      h2l1.5-9.6 M59.1,32.6c0,1.1-0.9,2.5-2,2.5c-0.7,0-1.1-0.6-1.1-1.6c0-1.6,0.7-2.6,1.6-2.6C58.3,30.9,59.1,31.4,59.1,32.6z" fill="#DCE5E5"/></g></g><g><g><path d="M4.2,36.9l1.2-7.2l0.2,7.2H7l2.6-7.2l-1.1,7.2h2.1l1.6-9.6H9.7l-2.8,5.9l-0.1-5.9H5.7l-3.4,9.6H4.2z" fill="#DCE5E5"/></g></g><g><g><path d="M33.1,36.9h2.1c0.6-3.3,0.7-6,2.1-5.5c0.2-1.3,0.5-1.8,0.7-2.3c0,0-0.1,0-0.4,0c-0.9,0-1.6,1.2-1.6,1.2      l0.2-1.1" fill="#DCE5E5"/></g></g><g><g><path d="M44.9,31.1c0,0,0.9-0.4,2.2-0.4c0.7,0,1.3,0.1,1.3,0.7c0,0.4-0.1,0.5-0.1,0.5s-0.6,0-0.9,0      c-1.7,0-3.6,0.7-3.6,3c0,1.8,1.2,2.2,1.9,2.2c1.4,0,2-0.9,2.1-0.9l-0.1,0.8h1.8l0.8-5.5c0-2.3-2-2.4-2.8-2.4 M49,33.4      c0,0.3-1.2,1.9-2.4,1.9c-0.6,0-0.8-0.5-0.8-0.8c0-0.5,0.3-1.2,1.8-1.2C48,33.4,49,33.4,49,33.4z" fill="#DCE5E5"/></g></g><g><g><path d="M49.9,36.9H52c0.6-3.3,0.7-6,2.1-5.5c0.2-1.3,0.5-1.8,0.7-2.3c0,0-0.1,0-0.4,0c-0.9,0-1.6,1.2-1.6,1.2      l0.2-1.1" fill="#DCE5E5"/></g></g></g></g></svg>\n      '):""}},{key:"_lessShowDescriptionBtn",value:function(e){return'\n      <button\n        class="'.concat(f.card.card__lessShowDescription," ").concat(f.card.card__lessShowDescriptionAbsolute,'"\n        aria-label="').concat(this._checkIsLessDescription(e)?"Less":"Show",' full description"\n      >\n        ').concat(this._lessShowBtnText(this._checkIsLessDescription(e)),"\n      </button>\n    ")}},{key:"_lessShowBtnText",value:function(e){return e?"Less full":'<span class="'.concat(f.card.card__ellipsis,'">...</span> Show full')}},{key:"_eventLessShowDescription",value:function(){var e=this;c(n(".".concat(f.cardList.card__list)),"click",(function(t){if(t.target.closest(".".concat(f.card.card__description))){var r=t.target.closest(".".concat(f.card.card__lessShowDescription)),n=t.target.closest(".".concat(f.card.card__description)),c=n.classList.contains(f.card.card__descriptionLess);r.innerHTML=e._lessShowBtnText(c),r&&c?(n.classList.remove(f.card.card__descriptionLess),r.classList.remove(f.card.card__lessShowDescriptionAbsolute)):r&&(n.classList.add(f.card.card__descriptionLess),r.classList.add(f.card.card__lessShowDescriptionAbsolute))}}))}},{key:"_checkIsLessDescription",value:function(e){return n('[data-card-id="'.concat(e,'"] .').concat(f.card.card__description)).classList.contains(f.card.card__descriptionLess)}},{key:"_getSpacedCardNumber",value:function(e){return e.replace(/(.{4})/g,"$1 ").trim().split(" ").map((function(e){return'<span class="'.concat(f.card.card__numberPart,'">').concat(e,"</span>")})).join("")}}],r&&_(t.prototype,r),a&&_(t,a),e}();function b(e){return function(e){if(Array.isArray(e))return g(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return g(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return g(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var C=function(){function e(t,r,n,c,a){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.store=t,this.storeData=this.store.loadData()||[],this.modal=r,this.confirmModal=n,this.cardList=c,this.card=a,this.modal.clickAddCard((function(){o.modal.bindAddCard(o.addCard.bind(o),o.storeData)})),this.confirmModal.bindModalConfirmRemoveCard(this.removeCard.bind(this))}var t,r,n;return t=e,r=[{key:"initApp",value:function(){0===this.storeData.length?this.cardList.renderEmptyList():this.cardList.renderCardList(this.storeData)}},{key:"removeCard",value:function(e){var t=this;this.storeData=this.storeData.filter((function(t){return t.cardNumber!==e})),0===this.storeData.length?(this.cardList.renderEmptyList(),this.store.saveData(this.storeData)):this.store.saveData(this.storeData,(function(){t.cardList.renderCardList(t.storeData)}))}},{key:"addCard",value:function(e){this.storeData=[].concat(b(this.storeData),[{cardNumber:e.cardNumber,description:e.description,cardName:e.cardName}]),this.store.saveData(this.storeData),this.cardList.renderCardList(this.storeData)}}],r&&y(t.prototype,r),n&&y(t,n),e}();function w(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var k=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._handleDocumentFocus=this._handleDocumentFocus.bind(this),this._handleDocumentKeyUp=this._handleDocumentKeyUp.bind(this),this.removeModal=this.removeModal.bind(this)}var t,r,o;return t=e,(r=[{key:"initModal",value:function(){this._eventDocumentFocus(),this._eventDocumentKeyUp(),this._eventClickModalClose(),this._setBodyOverflowHidden(!0)}},{key:"removeModal",value:function(){a(n("body"),"focus",this._handleDocumentFocus,!0),a(n("body"),"keyup",this._handleDocumentKeyUp),a(n(".".concat(f.modal.modal__closeBtn)),"click",this.removeModal),n(".".concat(f.app," .").concat(f.modal.modal)).remove(),this._setBodyOverflowHidden(!1)}},{key:"_eventDocumentFocus",value:function(){c(n("body"),"focus",this._handleDocumentFocus,!0)}},{key:"_eventDocumentKeyUp",value:function(){c(n("body"),"keyup",this._handleDocumentKeyUp)}},{key:"_eventClickModalClose",value:function(){c(n(".".concat(f.modal.modal__closeBtn)),"click",this.removeModal)}},{key:"_handleDocumentFocus",value:function(e){n(".".concat(f.modal.modal))&&!n(".".concat(f.modal.modal)).contains(e.target)&&(e.stopPropagation(),n(".".concat(f.modal.modal__closeBtn)).focus())}},{key:"_handleDocumentKeyUp",value:function(e){"key"in e&&"Escape"===e.key&&this.removeModal()}},{key:"_setBodyOverflowHidden",value:function(e){e?n("body").classList.add(f.overflowHidden):n("body").classList.remove(f.overflowHidden)}}])&&w(t.prototype,r),o&&w(t,o),e}();function D(e){return D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},D(e)}function M(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function F(){return F="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=O(e,t);if(n){var c=Object.getOwnPropertyDescriptor(n,t);return c.get?c.get.call(arguments.length<3?e:r):c.value}},F.apply(this,arguments)}function O(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=I(e)););return e}function N(e,t){return N=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},N(e,t)}function L(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=I(e);if(t){var c=I(this).constructor;r=Reflect.construct(n,arguments,c)}else r=n.apply(this,arguments);return E(this,r)}}function E(e,t){if(t&&("object"===D(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return S(e)}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function I(e){return I=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},I(e)}var H=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&N(e,t)}(i,e);var t,r,a,o=L(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this)).card=e,t.card.bindRemoveCard(t.bindShowConfirmModal.bind(S(t))),t.idCard=null,t}return t=i,(r=[{key:"bindShowConfirmModal",value:function(e){n(".app").insertAdjacentHTML("beforeend",'\n      <section class="'.concat(f.modal.modal,'" aria-modal="true" role="dialog">\n        <div class="').concat(f.modal.modal__bg," ").concat(f.modal.modal__bgLow,'"></div>\n        <div class="container ').concat(f.modal.modal__inner,'">\n          <button class="').concat(f.modal.modal__closeBtn,'"></button>\n          <h2 class="').concat(f.modal.modal__title,'">Are you sure you want to delete the card?</h2>\n          <div>\n            <button class="').concat(f.modal.modal__removeCardBtn,'" data-id="').concat(e,'">Yes</button>\n            <button class="').concat(f.modal.modal__cancelBtn,'">No</button>\n          </div>\n        </div>\n      </section>\n    ')),F(I(i.prototype),"initModal",this).call(this)}},{key:"bindModalConfirmRemoveCard",value:function(e){var t=this;c(n(".app"),"click",(function(r){r.target.closest(".".concat(f.modal.modal__removeCardBtn))&&(e(r.target.closest(".".concat(f.modal.modal__removeCardBtn)).dataset.id),F(I(i.prototype),"removeModal",t).call(t)),r.target.closest(".".concat(f.modal.modal__cancelBtn))&&F(I(i.prototype),"removeModal",t).call(t)}))}}])&&M(t.prototype,r),a&&M(t,a),i}(k),A=r(9362);function j(e){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},j(e)}function B(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function z(){return z="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=x(e,t);if(n){var c=Object.getOwnPropertyDescriptor(n,t);return c.get?c.get.call(arguments.length<3?e:r):c.value}},z.apply(this,arguments)}function x(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=K(e)););return e}function T(e,t){return T=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},T(e,t)}function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=K(e);if(t){var c=K(this).constructor;r=Reflect.construct(n,arguments,c)}else r=n.apply(this,arguments);return R(this,r)}}function R(e,t){if(t&&("object"===j(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return X(e)}function X(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function K(e){return K=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},K(e)}var U=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&T(e,t)}(l,e);var t,r,o,i=P(l);function l(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(e=i.call(this)).values={cardNumber:"",description:"",cardName:null},e._ccNumberPattern=/^\d{0,16}$/g,e._ccNumberInputOldValue=null,e._ccNumberInputOldCursor=null,e._handleInputCardDescription=e._handleInputCardDescription.bind(X(e)),e._ccNumberInputInputHandler=e._ccNumberInputInputHandler.bind(X(e)),e._ccNumberInputKeyDownHandler=e._ccNumberInputKeyDownHandler.bind(X(e)),e}return t=l,r=[{key:"bindAddCard",value:function(e,t){var r=this;c(n(".".concat(f.modal.modal__addCard)),"click",(function(c){c.preventDefault();var a=r._getNameCard(r.values.cardNumber);return t.find((function(e){return r.values.cardNumber===e.cardNumber}))?(r._showError(s.alreadyCard),void r._setAriaInvalid(n("#".concat(p.cardNumber)),!0)):16!==r.values.cardNumber.length?(r._showError(s.incompleteCard),void r._setAriaInvalid(n("#".concat(p.cardNumber)),!0)):a?r.values.description?(r._removeAddCardModal(),r.values.cardName=a,void e(r.values)):(r._showError(s.emptyDescription),r._setAriaInvalid(n("#".concat(p.cardNumber)),!1),void r._setAriaInvalid(n("#".concat(p.cardDescription)),!0)):(r._showError(s.invalidCard),void r._setAriaInvalid(n("#".concat(p.cardNumber)),!0))}))}},{key:"clickAddCard",value:function(e){var t=this;c(n(".".concat(f.modal.modalShowModalBtn)),"click",(function(){n(".app").insertAdjacentHTML("beforeend",'\n        <section class="'.concat(f.modal.modal,'" aria-modal="true" role="dialog">\n          <div class="').concat(f.modal.modal__bg," ").concat(f.modal.modal__bgHigh,'"></div>\n          <div class="container ').concat(f.modal.modal__inner,'">\n            <button class="').concat(f.modal.modal__closeBtn,'"></button>\n            <h2 class="').concat(f.modal.modal__title,'">Adding a new card</h2>\n            <form class="').concat(f.modal.modal__form,'">\n              <div class="').concat(f.modal.modal__row,'">\n                <label class="').concat(f.modal.modal__label,'" for="').concat(p.cardNumber,'">Card number</label>\n                <input\n                  name="').concat(p.cardNumber,'"\n                  class="').concat(f.modal.modal__input,'"\n                  id="').concat(p.cardNumber,'"\n                  type="text"\n                  placeholder="XXXX XXXX XXXX XXXX"\n                  aria-required="true"\n                >\n              </div>\n              <div class="').concat(f.modal.modal__row,'">\n                <label class="').concat(f.modal.modal__label,'" for="').concat(p.cardDescription,'">Description</label>\n                <textarea\n                  name="').concat(p.cardDescription,'"\n                  class="').concat(f.modal.modal__input,'"\n                  id="').concat(p.cardDescription,'"\n                  placeholder="Desctiption"\n                  rows="10"\n                  aria-required="true"\n                ></textarea>\n              </div>\n              <button class="').concat(f.modal.modal__addCard,'" aria-label="Close">\n                Add\n              </button>\n            </form>\n          </div>\n        </section>\n      ')),z(K(l.prototype),"initModal",t).call(t),t._eventInputCardNumber(),t._eventInputCardDescription(),e()}))}},{key:"_eventInputCardNumber",value:function(){c(n("#".concat(p.cardNumber)),"input",this._ccNumberInputInputHandler),c(n("#".concat(p.cardNumber)),"keydown",this._ccNumberInputKeyDownHandler)}},{key:"_eventInputCardDescription",value:function(){c(n("#".concat(p.cardDescription)),"input",this._handleInputCardDescription)}},{key:"_handleInputCardDescription",value:function(e){var t=e.target.value;this.values.description=t.slice(0,1024),n("#".concat(p.cardDescription)).value=this.values.description}},{key:"_removeAddCardModal",value:function(){a(n("#".concat(p.cardNumber)),"input",this._ccNumberInputInputHandler),a(n("#".concat(p.cardNumber)),"keydown",this._ccNumberInputKeyDownHandler),a(n("#".concat(p.cardDescription)),"input",this._handleInputCardDescription),z(K(l.prototype),"removeModal",this).call(this)}},{key:"_getNameCard",value:function(e){var t=(0,A.getCreditCardNameByNumber)(e);return t===u.masterCard||t===u.visa?t:null}},{key:"_showError",value:function(e){switch(n(".".concat(f.modal.modal__error))&&n(".".concat(f.modal.modal__error)).remove(),e){case s.alreadyCard:n(".".concat(f.modal.modal__addCard)).insertAdjacentHTML("beforebegin",this._getElemError("This card number already exists"));break;case s.invalidCard:n(".".concat(f.modal.modal__addCard)).insertAdjacentHTML("beforebegin",this._getElemError("Invalid card number. Supported formats Visa and Mastercard"));break;case s.incompleteCard:n(".".concat(f.modal.modal__addCard)).insertAdjacentHTML("beforebegin",this._getElemError("Incomplete card number"));break;case s.emptyDescription:n(".".concat(f.modal.modal__addCard)).insertAdjacentHTML("beforebegin",this._getElemError("The description for the map is empty"));break;default:n(".".concat(f.modal.modal__addCard)).insertAdjacentHTML("beforebegin",this._getElemError("Unknown error"))}}},{key:"_unmask",value:function(e){return e.replace(/[^\d]/g,"")}},{key:"_mask",value:function(e,t,r){for(var n=[],c=0;c<e.length;c++)0!==c&&c%t==0&&n.push(r),n.push(e[c]);return n.join("")}},{key:"_checkSeparator",value:function(e,t){return Math.floor(e/(t+1))}},{key:"_ccNumberInputKeyDownHandler",value:function(e){var t=e.target;this._ccNumberInputOldValue=t.value,this._ccNumberInputOldCursor=t.selectionEnd}},{key:"_ccNumberInputInputHandler",value:function(e){var t,r=e.target,n=this.values.cardNumber=this._unmask(r.value);n.match(this._ccNumberPattern)?(n=this._mask(n,4," "),t=this._ccNumberInputOldCursor-this._checkSeparator(this._ccNumberInputOldCursor,4)+this._checkSeparator(this._ccNumberInputOldCursor+(n.length-this._ccNumberInputOldValue.length),4)+(this._unmask(n).length-this._unmask(this._ccNumberInputOldValue).length),r.value=""!==n?n:""):(r.value=this._ccNumberInputOldValue,t=this._ccNumberInputOldCursor),r.setSelectionRange(t,t),this._highlightCC(r.value)}},{key:"_highlightCC",value:function(e){var t={amex:/^3/,visa:/^4/,mastercard:/^5/,disc:/^6/,genric:/(^1|^2|^7|^8|^9|^0)/};for(var r in t)if(t[r].test(e))break}},{key:"_getElemError",value:function(e){return'<div class="'.concat(f.modal.modal__error,'" id="error-message">').concat(e,"</div>")}},{key:"_setAriaInvalid",value:function(e,t){t?(e.setAttribute("aria-invalid","".concat(t)),e.setAttribute("aria-describedby","error-message")):(e.removeAttribute("aria-invalid"),e.removeAttribute("aria-describedby"))}}],r&&B(t.prototype,r),o&&B(t,o),l}(k),V=new d("cards-list"),$=new v,q=new h($),J=new C(V,new U,new H($),q,$),W=function(){J.initApp()};c(window,"load",W),c(window,"hashchange",W)}},r={};function n(e){var c=r[e];if(void 0!==c)return c.exports;var a=r[e]={exports:{}};return t[e].call(a.exports,a,a.exports,n),a.exports}n.m=t,e=[],n.O=(t,r,c,a)=>{if(!r){var o=1/0;for(s=0;s<e.length;s++){for(var[r,c,a]=e[s],i=!0,l=0;l<r.length;l++)(!1&a||o>=a)&&Object.keys(n.O).every((e=>n.O[e](r[l])))?r.splice(l--,1):(i=!1,a<o&&(o=a));if(i){e.splice(s--,1);var d=c();void 0!==d&&(t=d)}}return t}a=a||0;for(var s=e.length;s>0&&e[s-1][2]>a;s--)e[s]=e[s-1];e[s]=[r,c,a]},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={179:0};n.O.j=t=>0===e[t];var t=(t,r)=>{var c,a,[o,i,l]=r,d=0;if(o.some((t=>0!==e[t]))){for(c in i)n.o(i,c)&&(n.m[c]=i[c]);if(l)var s=l(n)}for(t&&t(r);d<o.length;d++)a=o[d],n.o(e,a)&&e[a]&&e[a][0](),e[o[d]]=0;return n.O(s)},r=self.webpackChunk=self.webpackChunk||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),n.O(void 0,[130],(()=>n(1202)));var c=n.O(void 0,[130],(()=>n(9590)));c=n.O(c)})();